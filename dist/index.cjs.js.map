{"version":3,"file":"index.cjs.js","sources":["../src/mouse/math.ts","../src/mouse/calc.ts","../src/mouse/spoof.ts","../src/mouse/helper.ts","../src/index.ts"],"sourcesContent":["// Taken from: https://github.com/Xetera/ghost-cursor/blob/master/src/math.ts\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst Bezier = require('bezier-js') as typeof BezierJs.Bezier\n\nexport interface Vector {\n  x: number\n  y: number\n}\nexport const origin: Vector = { x: 0, y: 0 }\n\n// maybe i should've just imported a vector library lol\nexport const sub = (a: Vector, b: Vector): Vector => ({\n  x: a.x - b.x,\n  y: a.y - b.y\n})\nexport const div = (a: Vector, b: number): Vector => ({\n  x: a.x / b,\n  y: a.y / b\n})\nexport const mult = (a: Vector, b: number): Vector => ({\n  x: a.x * b,\n  y: a.y * b\n})\nexport const add = (a: Vector, b: Vector): Vector => ({\n  x: a.x + b.x,\n  y: a.y + b.y\n})\n\nexport const direction = (a: Vector, b: Vector): Vector => sub(b, a)\nexport const perpendicular = (a: Vector): Vector => ({ x: a.y, y: -1 * a.x })\nexport const magnitude = (a: Vector): number =>\n  Math.sqrt(Math.pow(a.x, 2) + Math.pow(a.y, 2))\nexport const unit = (a: Vector): Vector => div(a, magnitude(a))\nexport const setMagnitude = (a: Vector, amount: number): Vector =>\n  mult(unit(a), amount)\n\nexport const randomNumberRange = (min: number, max: number): number =>\n  Math.random() * (max - min) + min\n\nexport const randomVectorOnLine = (a: Vector, b: Vector): Vector => {\n  const vec = direction(a, b)\n  const multiplier = Math.random()\n  return add(a, mult(vec, multiplier))\n}\n\nconst randomNormalLine = (\n  a: Vector,\n  b: Vector,\n  range: number\n): [Vector, Vector] => {\n  const randMid = randomVectorOnLine(a, b)\n  const normalV = setMagnitude(perpendicular(direction(a, randMid)), range)\n  return [randMid, normalV]\n}\n\nexport const generateBezierAnchors = (\n  a: Vector,\n  b: Vector,\n  spread: number\n): [Vector, Vector] => {\n  const side = Math.round(Math.random()) === 1 ? 1 : -1\n  const calc = (): Vector => {\n    const [randMid, normalV] = randomNormalLine(a, b, spread)\n    const choice = mult(normalV, side)\n    return randomVectorOnLine(randMid, add(randMid, choice))\n  }\n  return [calc(), calc()].sort((a, b) => a.x - b.x) as [Vector, Vector]\n}\n\nconst clamp = (target: number, min: number, max: number): number =>\n  Math.min(max, Math.max(min, target))\n\nexport const overshoot = (coordinate: Vector, radius: number): Vector => {\n  const a = Math.random() * 2 * Math.PI\n  const rad = radius * Math.sqrt(Math.random())\n  const vector = { x: rad * Math.cos(a), y: rad * Math.sin(a) }\n  return add(coordinate, vector)\n}\n\nexport const bezierCurve = (\n  start: Vector,\n  finish: Vector,\n  overrideSpread?: number\n): BezierJs.Bezier => {\n  // could be played around with\n  const min = 2\n  const max = 200\n  const vec = direction(start, finish)\n  const length = magnitude(vec)\n  const spread = clamp(length, min, max)\n  const anchors = generateBezierAnchors(start, finish, overrideSpread ?? spread)\n  return new Bezier(start, ...anchors, finish)\n}\n","import { Vector, bezierCurve } from './math'\n\nimport type { Box } from './types'\n\n/**\n * Calculate the amount of time needed to move from (x1, y1) to (x2, y2)\n * given the width of the element being clicked on\n * https://en.wikipedia.org/wiki/Fitts%27s_law\n */\nconst fitts = (distance: number, width: number): number => {\n  const a = 0\n  const b = 2\n  const id = Math.log2(distance / width + 1)\n  return a + b * id\n}\n\nconst isBox = (a: any): a is Box => 'width' in a\n\nexport function path(\n  point: Vector,\n  target: Vector,\n  spreadOverride?: number\n): Vector[]\nexport function path(\n  point: Vector,\n  target: Box,\n  spreadOverride?: number\n): Vector[]\nexport function path(\n  start: Vector,\n  end: Box | Vector,\n  spreadOverride?: number\n): Vector[] {\n  const defaultWidth = 100\n  const minSteps = 25\n  const width = isBox(end) ? end.width : defaultWidth\n  const curve = bezierCurve(start, end, spreadOverride)\n  const length = curve.length() * 0.8\n  const baseTime = Math.random() * minSteps\n  const steps = Math.ceil((Math.log2(fitts(length, width) + 1) + baseTime) * 3)\n  const re = curve.getLUT(steps)\n  return clampPositive(re)\n}\n\nconst clampPositive = (vectors: Vector[]): Vector[] => {\n  const clamp0 = (elem: number): number => Math.max(0, elem)\n  return vectors.map(vector => {\n    return {\n      x: clamp0(vector.x),\n      y: clamp0(vector.y)\n    }\n  })\n}\n","// Heavily based on: https://github.com/Xetera/ghost-cursor/blob/master/src/spoof.ts\nimport { Vector, direction, magnitude, origin, overshoot } from './math'\nimport * as calc from './calc'\n\nimport type { Puppeteer, Playwright } from 'automation-extra-plugin'\nimport type { Box } from './types'\n\ntype Page = Puppeteer.Page | Playwright.Page\ntype ElementHandle = Puppeteer.ElementHandle | Playwright.ElementHandle\n\n/**\n * Type guard, will make TypeScript understand which type we're working with.\n */\nfunction isPlaywrightPage(obj: any): obj is Playwright.Page {\n  return 'unroute' in (obj as Playwright.Page)\n}\n\n/**\n * Type guard, will make TypeScript understand which type we're working with.\n */\nfunction isPlaywrightElementHandle(obj: any): obj is Playwright.ElementHandle {\n  return !('$x' in (obj as Playwright.ElementHandle))\n}\n\ninterface BoxOptions {\n  readonly paddingPercentage: number\n}\ninterface MoveOptions extends BoxOptions {\n  readonly waitForSelector: number\n}\ninterface ClickOptions extends MoveOptions {\n  readonly waitForClick: number\n}\n\n// Helper function to wait a specified number of milliseconds\nconst delay = async (ms: number): Promise<void> =>\n  await new Promise(resolve => setTimeout(resolve, ms))\n\n// Get a random point on a box\nconst getRandomBoxPoint = (\n  { x, y, width, height }: Box,\n  options?: BoxOptions\n): Vector => {\n  let paddingWidth = 0\n  let paddingHeight = 0\n\n  if (\n    options?.paddingPercentage !== undefined &&\n    options?.paddingPercentage > 0 &&\n    options?.paddingPercentage < 100\n  ) {\n    paddingWidth = (width * options.paddingPercentage) / 100\n    paddingHeight = (height * options.paddingPercentage) / 100\n  }\n\n  return {\n    x: x + paddingWidth / 2 + Math.random() * (width - paddingWidth),\n    y: y + paddingHeight / 2 + Math.random() * (height - paddingHeight)\n  }\n}\n\n// Get a random point on a browser window\n// export const getRandomPagePoint = async (page: Page): Promise<Vector> => {\n//   const targetId: string = (page.target() as any)._targetId\n//   const window = await (page as any)._client.send(\n//     'Browser.getWindowForTarget',\n//     { targetId }\n//   )\n//   return getRandomBoxPoint({\n//     x: origin.x,\n//     y: origin.y,\n//     width: window.bounds.width,\n//     height: window.bounds.height\n//   })\n// }\n\n// Using this method to get correct position of Inline elements (elements like <a>)\nconst getElementBox = async (\n  page: Page,\n  element: ElementHandle,\n  relativeToMainFrame: boolean = true\n): Promise<Box | null> => {\n  if (isPlaywrightPage(page)) {\n    // TODO: Check if in main frame\n    return await element.boundingBox()\n  }\n\n  if (\n    (element as any)._remoteObject === undefined ||\n    (element as any)._remoteObject.objectId === undefined\n  ) {\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    return null\n  }\n  const quads = await (page as any)._client.send('DOM.getContentQuads', {\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n    objectId: (element as any)._remoteObject.objectId\n  })\n  const elementBox = {\n    x: quads.quads[0][0],\n    y: quads.quads[0][1],\n    width: quads.quads[0][4] - quads.quads[0][0],\n    height: quads.quads[0][5] - quads.quads[0][1]\n  }\n  if (elementBox === null) {\n    return null\n  }\n  if (!relativeToMainFrame) {\n    const elementFrame = ((element as Puppeteer.ElementHandle).executionContext() as any).frame()\n    const iframes = await elementFrame.parentFrame().$x('//iframe')\n    let frame = null\n    for (const iframe of iframes) {\n      if ((await iframe.contentFrame()) === elementFrame) frame = iframe\n    }\n    if (frame !== null) {\n      const boundingBox = await (frame as ElementHandle).boundingBox()\n      elementBox.x =\n        boundingBox !== null ? elementBox.x - boundingBox.x : elementBox.x\n      elementBox.y =\n        boundingBox !== null ? elementBox.y - boundingBox.y : elementBox.y\n    }\n  }\n  return elementBox\n}\n\nconst overshootThreshold = 500\nconst shouldOvershoot = (a: Vector, b: Vector): boolean =>\n  magnitude(direction(a, b)) > overshootThreshold\n\nexport const createCursor = (\n  page: Page,\n  start: Vector = origin,\n  performRandomMoves: boolean = false\n) => {\n  // this is kind of arbitrary, not a big fan but it seems to work\n  const overshootSpread = 10\n  const overshootRadius = 120\n  let previous: Vector = start\n\n  // Initial state: mouse is not moving\n  let moving: boolean = false\n\n  // Move the mouse over a number of vectors\n  const tracePath = async (\n    vectors: Iterable<Vector>,\n    abortOnMove: boolean = false\n  ): Promise<void> => {\n    for (const v of vectors) {\n      try {\n        // In case this is called from random mouse movements and the users wants to move the mouse, abort\n        if (abortOnMove && moving) {\n          return\n        }\n        await page.mouse.move(v.x, v.y)\n        previous = v\n      } catch (error) {\n        // Exit function if the browser is no longer connected\n        const isConnected = isPlaywrightPage(page)\n          ? page.context().browser()?.isConnected\n          : page.browser().isConnected()\n        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n        if (!isConnected) return\n\n        console.log('Warning: could not move mouse, error message:', error)\n      }\n    }\n  }\n\n  // Start random mouse movements. Function recursively calls itself\n  // const randomMove = async (): Promise<void> => {\n  //   try {\n  //     if (!moving) {\n  //       const rand = await getRandomPagePoint(page)\n  //       await tracePath(path(previous, rand), true)\n  //       previous = rand\n  //     }\n  //     await delay(Math.random() * 2000) // wait max 2 seconds\n  //     randomMove().then(\n  //       _ => {},\n  //       _ => {}\n  //     ) // fire and forget, recursive function\n  //   } catch (_) {\n  //     console.log('Warning: stopping random mouse movements')\n  //   }\n  // }\n\n  const actions = {\n    toggleRandomMove(random: boolean): void {\n      moving = !random\n    },\n\n    async click(\n      selector?: string | ElementHandle,\n      options?: ClickOptions\n    ): Promise<void> {\n      actions.toggleRandomMove(false)\n\n      if (selector !== undefined) {\n        await actions.move(selector, options)\n        actions.toggleRandomMove(false)\n      }\n\n      try {\n        await page.mouse.down()\n        if (options?.waitForClick !== undefined) {\n          await delay(options.waitForClick)\n        }\n        await page.mouse.up()\n      } catch (error) {\n        console.log('Warning: could not click mouse, error message:', error)\n      }\n\n      await delay(Math.random() * 2000)\n      actions.toggleRandomMove(true)\n    },\n    async move(selector: string | ElementHandle, options?: MoveOptions) {\n      actions.toggleRandomMove(false)\n      let elem: ElementHandle | null = null\n      if (typeof selector === 'string') {\n        if (selector.includes('//')) {\n          if (options?.waitForSelector !== undefined) {\n            // TODO: Refactor and make Playwright compatible\n            // @see xpath: https://stackoverflow.com/a/59924073\n            // await page.waitForXPath(selector, {\n            //   timeout: options.waitForSelector\n            // })\n          }\n          // elem = await page.$x(selector)\n        } else {\n          if (options?.waitForSelector !== undefined) {\n            // await page.waitForSelector(selector, {\n            //   timeout: options.waitForSelector\n            // })\n          }\n          elem = await page.$(selector)\n        }\n        if (elem === null) {\n          throw new Error(\n            `Could not find element with selector \"${selector}\", make sure you're waiting for the elements with \"puppeteer.waitForSelector\"`\n          )\n        }\n      } else {\n        elem = selector\n      }\n\n      // Make sure the object is in view\n      if (isPlaywrightElementHandle(elem)) {\n        await elem.scrollIntoViewIfNeeded()\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        if (\n          (elem as any)._remoteObject !== undefined &&\n          (elem as any)._remoteObject.objectId !== undefined\n        ) {\n          await (page as any)._client.send('DOM.scrollIntoViewIfNeeded', {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            objectId: (elem as any)._remoteObject.objectId\n          })\n        }\n      }\n\n      const box = await getElementBox(page, elem)\n      if (box === null) {\n        throw new Error(\n          \"Could not find the dimensions of the element you're clicking on, this might be a bug?\"\n        )\n      }\n      const { height, width } = box\n      const destination = getRandomBoxPoint(box, options)\n      const dimensions = { height, width }\n      const overshooting = shouldOvershoot(previous, destination)\n      const to = overshooting\n        ? overshoot(destination, overshootRadius)\n        : destination\n      await tracePath(calc.path(previous, to))\n\n      if (overshooting) {\n        const correction = calc.path(\n          to,\n          { ...dimensions, ...destination },\n          overshootSpread\n        )\n\n        await tracePath(correction)\n      }\n      previous = destination\n\n      actions.toggleRandomMove(true)\n    },\n    async moveTo(destination: Vector) {\n      actions.toggleRandomMove(false)\n      await tracePath(calc.path(previous, destination))\n      actions.toggleRandomMove(true)\n    }\n  }\n\n  // Start random mouse movements. Do not await the promise but return immediately\n  // if (performRandomMoves)\n  // TODO: Fix random move thing\n  // randomMove().then(\n  //   _ => {},\n  //   _ => {}\n  // )\n\n  return actions\n}\n","// Heavily based on: https://github.com/Xetera/ghost-cursor/\nimport type { Page, LauncherEnv } from 'automation-extra-plugin'\n\nconst contentScript = () => {\n  window.addEventListener(\n    'DOMContentLoaded',\n    () => {\n      const box = document.createElement('p-mouse-pointer')\n      const styleElement = document.createElement('style')\n      styleElement.innerHTML = `\n        p-mouse-pointer {\n          pointer-events: none;\n          position: absolute;\n          top: 0;\n          z-index: 10000;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          background: rgba(0,0,0,.4);\n          border: 1px solid white;\n          border-radius: 10px;\n          margin: -10px 0 0 -10px;\n          padding: 0;\n          transition: background .2s, border-radius .2s, border-color .2s;\n        }\n        p-mouse-pointer.button-1 {\n          transition: none;\n          background: rgba(0,0,0,0.9);\n        }\n        p-mouse-pointer.button-2 {\n          transition: none;\n          border-color: rgba(0,0,255,0.9);\n        }\n        p-mouse-pointer.button-3 {\n          transition: none;\n          border-radius: 4px;\n        }\n        p-mouse-pointer.button-4 {\n          transition: none;\n          border-color: rgba(255,0,0,0.9);\n        }\n        p-mouse-pointer.button-5 {\n          transition: none;\n          border-color: rgba(0,255,0,0.9);\n        }\n        p-mouse-pointer-hide {\n          display: none\n        }\n      `\n      document.head.appendChild(styleElement)\n      document.body.appendChild(box)\n      document.addEventListener(\n        'mousemove',\n        event => {\n          box.style.left = String(event.pageX) + 'px'\n          box.style.top = String(event.pageY) + 'px'\n          box.classList.remove('p-mouse-pointer-hide')\n          updateButtons(event.buttons)\n        },\n        true\n      )\n      document.addEventListener(\n        'mousedown',\n        event => {\n          updateButtons(event.buttons)\n          box.classList.add('button-' + String(event.which))\n          box.classList.remove('p-mouse-pointer-hide')\n        },\n        true\n      )\n      document.addEventListener(\n        'mouseup',\n        event => {\n          updateButtons(event.buttons)\n          box.classList.remove('button-' + String(event.which))\n          box.classList.remove('p-mouse-pointer-hide')\n        },\n        true\n      )\n      document.addEventListener(\n        'mouseleave',\n        event => {\n          updateButtons(event.buttons)\n          box.classList.add('p-mouse-pointer-hide')\n        },\n        true\n      )\n      document.addEventListener(\n        'mouseenter',\n        event => {\n          updateButtons(event.buttons)\n          box.classList.remove('p-mouse-pointer-hide')\n        },\n        true\n      )\n      /* eslint-disable */\n      function updateButtons(buttons: any) {\n        for (let i = 0; i < 5; i++) {\n          // @ts-ignore\n          box.classList.toggle('button-' + String(i), buttons & (1 << i))\n        }\n      }\n    },\n    false\n  )\n}\n\nexport const installHelper = async (page: Page, env: LauncherEnv) => {\n  if (env.isPuppeteerPage(page)) {\n    return await page.evaluateOnNewDocument(contentScript)\n  }\n  if (env.isPlaywrightPage(page)) {\n    return await page.addInitScript(contentScript)\n  }\n  throw new Error('Unsupported driver')\n}\n","import {\n  AutomationExtraPlugin,\n  Playwright,\n  NestedPartial\n} from 'automation-extra-plugin'\nimport * as mouse from './mouse/spoof'\nimport * as mouseHelper from './mouse/helper'\n\nimport type { Puppeteer, Page } from 'automation-extra-plugin'\n\ntype PlaywrightClickOptions = Parameters<Playwright.Page['click']>\n\nexport interface MouseOpts {\n  /** Enable human mouse movements when clicking */\n  enabled: boolean\n  /** Show a visible cursor (for testing, not for production) */\n  showCursor: boolean\n}\n\nexport interface HumanizePluginOpts {\n  mouse: MouseOpts\n}\n\nexport class HumanizePlugin extends AutomationExtraPlugin<HumanizePluginOpts> {\n  constructor(opts: NestedPartial<HumanizePluginOpts> = {}) {\n    super(opts)\n  }\n\n  static get id() {\n    return 'humanize'\n  }\n\n  get defaults() {\n    return {\n      mouse: {\n        enabled: true,\n        showCursor: false\n      }\n    }\n  }\n\n  /** Enable the humanize plugin */\n  public enable() {\n    this.opts.mouse.enabled = true\n  }\n\n  /** Disable the humanize plugin */\n  public disable() {\n    this.opts.mouse.enabled = false\n  }\n\n  async onPageCreated(page: Page) {\n    this.debug('onPageCreated', this.opts)\n    if (!this.opts.mouse.enabled) {\n      return\n    }\n\n    if (this.opts.mouse.showCursor) {\n      // eslint-disable-next-line @typescript-eslint/no-floating-promises\n      mouseHelper.installHelper(page, this.env)\n    }\n\n    const cursor = mouse.createCursor(page)\n\n    // TODO: Support elementHandle.click\n    page.click = ((originalMethod, ctx) => {\n      return async (\n        selector: string,\n        options?: Puppeteer.ClickOptions | PlaywrightClickOptions | undefined\n      ) => {\n        if (!this.opts.mouse.enabled) {\n          return await originalMethod.apply(ctx, [selector, options as any])\n        }\n\n        try {\n          // TODO: Imitate regular page.click options (delay, etc)\n          return await cursor.click(selector)\n        } catch (err) {\n          console.warn(\n            `An error occured clicking on \"${selector}\":`,\n            err.toString()\n          )\n          console.log('Skipping humanize and use vanilla click.')\n          return await originalMethod.apply(ctx, [selector, options as any])\n        }\n      }\n    })(page.click, page)\n  }\n}\n\n/** Default export  */\nconst defaultExport = (opts?: NestedPartial<HumanizePluginOpts>) => {\n  return new HumanizePlugin(opts)\n}\n\nexport default defaultExport\n"],"names":["calc.path","AutomationExtraPlugin","mouseHelper.installHelper","mouse.createCursor"],"mappings":"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"}